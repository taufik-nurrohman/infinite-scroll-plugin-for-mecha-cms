/*! Simple AJAX infinite scroll by Taufik Nurrohman <http://latitudu.com> */
!function(e,t){function n(e,n){return n=n||t,n.querySelectorAll(e)}function i(){return d.innerHTML=s.text.loading,f=!0,p?(g.classList.add("infinite-scroll-state-loading"),void o(p,function(e){g.className=T;var i=t.createElement("div");i.innerHTML=e;var r=n("title",i)[0].innerHTML,o=n(s.target.post,i),l=n(s.target.posts_nav+" a[rel=next]",i),d=n(s.target.post,c);if(o.length&&d.length){var u=d[d.length-1];t.title=r,u.insertAdjacentHTML("afterend",'<span class="fi" id="#fi:'+m+'"></span>');for(var h=t.createElement("div"),v=0,H=o.length;H>v;++v)h.appendChild(o[v]);u.insertAdjacentHTML("afterend",h.innerHTML),a(),p=l.length?l[0].href:!1,f=!1,m++}},function(){g.className=T,f=!1,a()})):(g.classList.add("infinite-scroll-state-loaded"),r(),d.innerHTML=s.text.loaded)}function a(){d.innerHTML="",M.href="javascript:;",M.innerHTML=s.text.load,M.onclick=function(){return 2===s.type&&(l=!1),i(),!1},d.appendChild(M)}function r(){M.parentNode&&d.removeChild(M)}var o=function(t,n,i){if(e.XMLHttpRequest){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState){if(200!==a.status)return void(i&&"function"==typeof i&&i(a.responseText,a));n&&"function"==typeof n&&n(a.responseText,a)}},a.open("GET",t),a.send()}},s=plugin_infinite_scroll_config,l=1!==s.type,f=!1,c=n(s.target.posts)[0],d=n(s.target.posts_nav)[0],p=n("a[rel=next]",d),u=t.body,g=t.documentElement,T=g.className,h=c.offsetTop+c.offsetHeight,v=e.innerHeight,H=0,L=null,m=1;if(p.length){p=p[0].href,c.insertAdjacentHTML("afterbegin",'<span class="fi" id="#fi:0"></span>');var M=t.createElement("a");a();var y=function(){h=c.offsetTop+c.offsetHeight,v=e.innerHeight,H=u.scrollTop||g.scrollTop,f||h>H+v||i()};y(),0!==s.type&&e.addEventListener("scroll",function(){l||(L&&e.clearTimeout(L),L=e.setTimeout(y,500))},!1)}}(window,document);